<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<head>
<link href='http://fonts.googleapis.com/css?family=Lily+Script+One' rel='stylesheet' type='text/css'>
    <meta charset="utf-8">
    <title>RouteScout</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="RouteScout">
    <meta name="author" content="">

    <!-- Le styles -->
   <link href="files/style.css" rel="stylesheet">
   <link href="files/bootstrap.css" rel="stylesheet">
    <link href="files/example-fluid-layout.css" rel="stylesheet">
      <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDjX5a3zMFqvmcjySBDAbkf2fOfY1piELs&sensor=false&libraries=drawing"></script>
      </script>
      <p><a id="report-button" class="popup-button btn btn-success btn-large">Report Accident</a></p>
      <p><a id="tip-button" class="popup-button btn btn-success btn-large">Add Tip</a></p>

    <script>
      
    var map;
    var adding;
    
    function toggleActive(button) {
	var active = $(button).hasClass("active");
	if (!active) {
	    $(button).addClass("active");
	    if ($(button).attr("id") == "report-button") {
		$("#tip-button").removeClass("active");
	    } else {
		$("#report-button").removeClass("active");
	    }
	} else {
	    map.setOptions({ draggableCursor: 'default' });
	    $(button).removeClass("active");
	}
    }
    
    var iconBase = 'popups/';
    var icons = {
      thumbstack: {
	icon: iconBase + 'thumbtack-blue.png'
      },
      caution: {
	icon: iconBase + 'caution.png'
      },
      star: {
	icon: iconBase + 'star-32.png'
      }
    };
    
    function addMarker(feature) {
      var marker = new google.maps.Marker({
	position: feature.position,
	icon: icons[feature.type].icon,
	map: feature.map
      });
      map.setOptions({ draggableCursor: 'default' });
      adding = undefined;
    }
    
    function initialize() {
        var myCenter=new google.maps.LatLng(42.3522, -71.0627);
        var directionsDisplay = new google.maps.DirectionsRenderer();
        var directionsService = new google.maps.DirectionsService();
        
        var mapProp = {
          center:new google.maps.LatLng(42.3522, -71.0627),
          zoom:16,
          mapTypeId:google.maps.MapTypeId.ROADMAP
          };
        map=new google.maps.Map(document.getElementById("googleMap")
          ,mapProp);
	
	map.setOptions({ draggableCursor: 'default' });
	
	google.maps.event.addListener(map, 'click', function(event) {
	    var feature;
	    if (adding == "star") {
		feature = {position: event.latLng, type: "star", map: map};
	    } else if (adding == "caution") {
		feature = {position: event.latLng, type: "caution", map: map};
	    }
	    if (feature != undefined && feature != null) {
		addMarker(feature);
	    }
	    $("#report-button").removeClass("active");
	    $("#tip-button").removeClass("active");
	});
	
        directionsDisplay.setMap(map);
        Route();
        
        function Route() {
            var start = new google.maps.LatLng(42.3522, -71.0627);
            var end =new google.maps.LatLng(42.355, -71.065556);
            var request = {
            origin:start,
            destination:end,
            travelMode: google.maps.TravelMode.WALKING
             };
             directionsService.route(request, function(result, status) {
            if (status == google.maps.DirectionsStatus.OK) {
              directionsDisplay.setDirections(result);
            } else { alert("couldn't get directions:"+status); }
            });
        } 
    
      $("#report-button").click(function() {
          map.setOptions({ draggableCursor : "url(popups/caution.png), auto" });
          adding = "caution";
          toggleActive(this);
      });
      
      $("#tip-button").click(function() {
          map.setOptions({ draggableCursor: "url(popups/star-32.png), auto" });
          adding = "star";
          toggleActive(this);
      });

      $("#savedroutes").click(function() {
        $("#second").attr("src", "myroutes.html").show();
      });
      
      $("#route").click(function(e) {
        $("#second").fadeIn();
        if ($("#second").attr("src") == "myroutes.html") {
          $("#second").attr("src", "filter_routes.html");
        }
        e.preventDefault();
      });
    }

    google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <style>
  a {
  color: #000000;
}
a:hover {
  color:#FFFFFF;
  text-decoration: none;
}
</style>
  <body background="parchment.jpg">
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">

      <a class="logout-saved" id="logout"href="#">Logout</a>
        <a class="logout-saved" id="savedroutes"href="#">Saved Routes</a>

        <div id="center-this-navbar">
        <div id="header">
            RouteScout         
            </div>
        </div>
 </div>
    </div>

    
    <div id="content">
    <div class="container-fluid span15">
      <div class="row-fluid">
        <div class="container-fluid span15">
          <div class="row-fluid">
	<div id="first" class="container well well-small span11" height="200">
     <div id="two">
		<div class="from-to" style="text-align:center">
				
				<form class="navbar-form" role="search">
				
				<div id = "test">
					<h3>From:</h3>
					<input type="text" class="form-control" placeholder="Search" name="srch-term" id="srch-term" value="Chinatown Station, Boston, MA">
				</div>
		
				<div id = "test">
					<h3>To:</h3>
					<input type="text" class="form-control" placeholder="Search" name="srch-term" id="srch-term" value="Boston Common, Tremont Street" >
				</div>
		
			</div>
		
		
		
		<div id="route-find" style="text-align:center">
			<button id="route" class="btn btn-large" >Search For Routes!</button>
		</div>
	 </div>
	</div>

</div>
  <div class="row-fluid">
    <style>
    #first
    {
        overflow:hidden;
        background: url(texture-noise-beige-blur-lt.gif);
    }
    #second {
        overflow:hidden;
        background:url(texture-noise-beige-blur-lt.gif);
    }
</style>
  <iframe id="second" name="second" class="container well span11" src="filter_routes.html" height="510" sandbox="allow-same-origin allow-scripts">
     <p>Your browser does not support iframes.</p>
  </iframe>
</div>
</div>
</div>
</div>
<div class="container-fluid">
	<div class="span8">
        <div id="googleMap" style="width:900px;height:600px;"></div>
        <hr>
     <footer>
      </footer>

    </div><!--/.fluid-container-->
    </div>
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="files/jquery.js"></script>
    <script src="files/bootstrap-transition.js"></script>
    <script src="files/bootstrap-alert.js"></script>
    <script src="files/bootstrap-modal.js"></script>
    <script src="files/bootstrap-dropdown.js"></script>
    <script src="files/bootstrap-scrollspy.js"></script>
    <script src="files/bootstrap-tab.js"></script>
    <script src="files/bootstrap-tooltip.js"></script>
    <script src="files/bootstrap-popover.js"></script>
    <script src="files/bootstrap-button.js"></script>
    <script src="files/bootstrap-collapse.js"></script>
    <script src="files/bootstrap-carousel.js"></script>
    <script src="files/bootstrap-typeahead.js"></script>

  
</div></div>
</div>
</body></html>
